
import de.voidplus.dollar.*;

ProgramState state = new ProgramState();
Shape shape;

// to handle multiple keys being pressed
boolean[] keys = new boolean[256];

OneDollar one;

// callback
void detected(String gesture, float percent, int startX, int startY, int centroidX, int centroidY, int endX, int endY){
  println("Gesture: "+gesture+", "+startX+"/"+startY+", "+centroidX+"/"+centroidY+", "+endX+"/"+endY);
  if(state.allowShortcuts) return;
  if(gesture.equals("FREEFORM_LINE"))
    state.shapeMode = ShapeType.FREEFORM_LINE;
  else if(gesture.equals("RECTANGLE"))
    state.shapeMode = ShapeType.RECTANGLE;
  else if(gesture.equals("OVAL"))
    state.shapeMode = ShapeType.OVAL;
  else if(gesture.equals("STRAIGHT_LINE"))
    state.shapeMode = ShapeType.STRAIGHT_LINE;
  else if(gesture.equals("CHANGE_COLOR")){
    println("color:"+state.colorMode);
    switch (state.colorMode) {
      case RED:
        state.colorMode = ColorType.GREEN;
        break;
      case GREEN:
        state.colorMode = ColorType.BLUE;
        break;
      case BLUE:
        state.colorMode = ColorType.BLACK;
        break;
      case BLACK:
        state.colorMode = ColorType.RED;
        break;
     }
   }
   else if(gesture.equals("CHNAGE_THICKNESS")){
    switch (state.weightMode) {
      case THIN:
        state.weightMode = WeightType.MEDIUM;
        break;
      case MEDIUM:
        state.weightMode = WeightType.THICK;
        break;
      case THICK:
        state.weightMode = WeightType.THIN;
        break;
     }
   }
}

void setup() {
  fullScreen();
  background(255);
  
  one = new OneDollar(this);
  one.setVerbose(true);
  one.disableAutoCheck();
  // ~ for Freeform lines
  one.learn("FREEFORM_LINE", new int[] {130,426,130,426,130,425,130,425,130,424,130,424,130,424,130,423,130,423,130,422,130,422,130,422,130,421,130,420,131,420,131,419,131,419,131,419,131,418,131,418,131,417,131,417,131,417,131,416,132,416,132,415,132,414,132,414,132,414,132,413,132,413,132,412,132,412,132,412,132,411,132,411,132,410,132,410,133,409,133,409,133,407,133,407,133,406,134,405,134,405,134,404,134,404,134,404,134,403,134,403,134,402,135,402,135,402,135,401,135,401,135,400,135,400,135,400,135,399,135,399,136,398,136,398,136,397,136,397,136,397,136,396,137,396,137,395,137,395,137,394,137,394,137,394,137,393,138,393,138,393,138,392,138,392,138,392,139,392,139,391,139,391,139,390,139,390,140,390,140,389,140,389,140,389,140,389,140,388,141,388,141,387,141,387,142,387,142,387,142,386,142,386,142,386,142,386,143,385,143,385,143,384,143,384,144,384,144,384,145,384,145,383,145,383,145,382,146,382,146,382,147,382,147,381,147,381,147,380,148,380,148,380,148,380,149,380,149,379,149,379,150,379,150,379,150,379,150,379,150,379,151,378,151,378,152,378,152,378,152,378,152,377,153,377,153,377,153,377,154,377,154,377,154,377,155,377,155,377,155,376,155,376,156,376,156,376,157,376,157,376,157,376,158,375,158,375,159,375,159,375,159,375,160,375,160,375,160,375,161,375,161,375,161,375,162,375,162,375,162,374,163,374,163,374,163,374,164,374,164,374,165,374,165,374,165,374,166,374,166,374,167,374,167,374,168,374,168,374,168,374,169,374,169,374,170,374,170,374,170,374,171,374,171,374,172,374,172,374,172,374,173,374,173,374,174,374,174,374,175,374,175,374,175,374,175,374,176,374,176,374,177,374,177,375,177,375,178,375,178,375,179,376,179,376,180,376,180,376,180,376,181,376,181,376,181,377,182,377,182,377,182,377,183,377,183,377,184,377,184,378,184,378,185,378,185,378,185,379,186,379,186,379,187,379,187,379,187,379,187,380,188,380,188,380,189,380,189,381,189,381,189,381,190,381,190,382,190,382,190,382,191,382,191,382,191,383,191,383,192,383,192,383,192,384,192,384,193,384,193,384,194,385,194,385,194,386,195,386,195,386,195,387,196,387,196,387,196,387,196,388,197,388,197,389,197,389,198,389,198,390,199,390,199,390,199,391,199,391,200,391,200,392,201,392,201,392,201,393,202,393,202,393,202,394,202,394,202,394,203,394,203,394,204,395,204,396,204,396,205,396,205,397,205,397,206,397,206,397,206,398,207,398,207,398,207,398,207,399,207,399,208,399,208,400,208,400,209,400,209,400,210,401,210,401,211,402,211,402,211,402,212,402,212,403,212,403,212,404,213,404,213,404,213,404,214,404,214,404,214,404,214,405,215,405,215,405,215,406,215,406,215,406,216,406,216,406,216,406,216,407,217,407,217,407,217,407,217,407,218,408,218,408,219,408,219,409,219,409,220,409,220,409,220,409,220,409,221,409,221,410,221,410,222,410,222,410,222,411,223,411,223,411,224,412,224,412,225,412,225,412,225,412,225,413,226,413,227,413,227,414,227,414,228,414,228,414,229,414,229,414,229,415,230,415,230,415,230,415,230,416,231,416,231,416,231,416,232,416,232,416,232,416,233,417,233,417,234,417,234,417,234,417,234,418,235,418,235,418,236,418,236,418,236,418,236,418,237,418,237,418,237,418,237,418,238,418,238,418,238,418,239,418,239,418,239,418,239,418,240,418,240,418,241,418,241,417,241,417,241,417,242,416,242,416,242,416,243,416,243,416,243,416,243,415,243,415,244,415,244,414,244,414,244,414,245,414,245,413,246,413,246,413,246,413,246,412,246,412,246,412,247,411,247,411,247,411,247,411,248,411,248,410,248,410,248,409,248,409,248,409,248,409,249,409,249,408,249,408,249,407,250,407,250,407,250,406,250,406,250,405,250,405,250,405,250,405,250,404,251,404,251,403,251,403,251,403,251,402,251,402,251,401,251,401,251,401,251,400,252,400,252,400,252,399,252,399,252,399,252,398,252,398,252,397,252,397,252,397,252,396,252,396,252,395,252,395,252,395,252,394,253,394,253,393,253,393,253,392,253,392,253,392,253,391,253,391,253,390,253,390,253,390,253,389,253,389,253,388,253,388,253,387,253,387,253,387,253,386,253,386,253,385,253,385,253,385,253,384,253,383,253,383,253,382,253,382,253,382,253,381,253,381,253,380,253,380,253,380,253,379,253,379,253,378,253,378,253,377,253,377,253,377,253,376,253,376,253,375,253,375,253,375,253,374,253,374,254,373,254,373,254,373,254,372,254,372,254,371,254,371,254,371,254,370,254,370,254,370,254,369,254,369,254,369,254,368,254,368,254,368,254,367,254,367,254,367,254,367,254,366,254,366,254,366,254,366,254,365,254,365,254,365,254,364,254,364,254,364,254,364,254,363,});
  // square for RECTANGLE
  one.learn("RECTANGLE", new int[] {115,235,115,235,115,235,116,235,117,235,117,235,118,235,119,235,120,235,120,235,121,236,122,236,123,236,124,236,125,236,125,236,126,236,127,236,128,236,129,236,130,237,130,237,131,237,132,237,133,237,134,237,135,237,135,237,137,237,138,237,138,237,139,237,140,237,140,237,142,237,142,237,143,237,144,237,145,237,146,237,147,237,148,237,149,237,150,237,151,237,152,237,153,237,154,237,155,237,156,237,157,237,158,237,160,237,161,237,162,237,164,237,165,237,166,237,167,237,168,237,169,237,171,237,171,237,173,238,176,238,176,238,177,238,179,238,180,238,181,238,183,238,184,238,185,238,186,238,187,238,188,238,189,238,190,238,191,238,192,238,193,238,194,238,195,238,196,238,197,238,198,238,199,238,200,238,201,238,201,238,202,238,203,238,204,238,204,238,205,238,206,239,207,239,208,239,209,239,209,239,211,239,211,239,211,239,212,239,213,239,214,239,214,239,214,239,215,239,216,239,216,239,217,239,217,239,218,239,219,239,219,239,219,239,220,239,220,239,221,239,221,240,221,240,222,240,222,240,223,240,223,240,223,240,223,241,223,242,223,242,223,243,223,244,223,245,223,246,223,246,222,247,222,248,222,249,222,250,222,251,221,251,221,252,221,253,221,255,221,255,221,256,221,256,221,257,221,258,221,258,221,259,221,259,221,260,221,261,221,261,221,262,221,263,221,263,221,264,221,264,221,265,221,266,221,266,221,267,221,267,221,268,221,269,221,270,221,271,221,272,221,272,221,273,221,273,221,274,221,274,221,275,221,276,221,276,221,277,221,278,221,278,221,279,221,279,221,280,221,281,221,282,221,282,221,283,221,284,221,284,221,285,221,285,221,286,221,287,221,287,221,287,221,288,221,289,221,289,221,290,221,290,221,292,221,293,221,294,221,294,221,295,221,295,222,295,222,296,222,296,222,297,222,297,222,297,222,298,222,298,222,298,222,299,222,299,222,299,222,300,223,300,223,300,223,301,223,301,223,302,223,302,223,302,223,303,223,303,223,303,223,303,222,303,222,303,221,303,221,303,221,303,220,303,220,303,219,303,219,303,218,303,218,303,217,303,217,303,216,303,216,303,215,303,215,303,213,303,213,303,212,303,211,303,210,303,210,303,208,303,208,303,207,304,206,304,205,304,205,304,203,304,203,304,201,304,200,304,199,304,198,304,197,304,196,304,195,304,194,305,193,305,192,305,191,305,190,305,189,305,188,305,187,305,186,305,185,305,183,305,183,305,182,305,181,305,180,306,179,306,177,306,176,306,175,306,174,306,173,307,172,307,170,307,169,307,168,307,167,307,166,307,164,307,163,307,162,308,161,308,160,308,158,308,158,309,156,309,155,309,154,309,153,309,152,309,151,309,150,309,148,309,147,309,146,309,145,310,144,310,144,310,142,310,142,310,141,310,140,310,139,310,138,310,137,310,136,310,136,310,135,310,135,310,134,310,133,310,133,310,132,310,131,310,130,310,130,310,130,310,129,310,129,310,128,310,128,310,128,310,127,310,127,310,126,310,126,310,125,310,125,310,125,310,124,310,124,310,123,310,123,310,123,310,122,310,122,311,122,310,122,310,122,310,122,309,122,309,122,308,122,307,122,307,122,305,123,305,123,304,123,303,123,303,123,302,123,301,123,300,123,299,123,299,124,298,124,298,124,297,124,296,124,295,124,295,124,294,124,294,124,293,124,292,124,292,124,291,124,290,124,290,124,289,124,288,124,288,124,287,124,287,124,285,124,284,124,284,124,283,124,283,124,282,124,282,124,281,124,280,124,279,124,279,124,279,124,278,124,277,124,277,124,276,124,276,124,275,124,274,124,274,124,274,124,273,124,272,124,272,124,271,124,270,124,270,124,269,124,269,124,268,124,267,124,267,124,266,124,265,124,265,124,264,124,264,124,264,124,263,124,263,124,262,124,262,124,262,124,261,124,261,124,260,124,259,124,259,124,258,124,258,124,257,124,257,124,257,124,256,124,256,124,255,124,255,124,254,124,254,124,253,124,253,124,252,124,252,124,252,124,251,124,251,124,250,124,250,124,250,124,249,124,249,124,248,124,248,124,247,124,247,124,247,124,246,124,246,124,245,124,245,124,245,124,244,124,244,124,243,124,243,124,242,124,242,124,242,124,241,124,241,124,241,124,240,124,240,124,240,124,240,124,239,124,239,124,239,124,238,124,238,124,238,124,237,124,237,124,236,124,236,124,236,});
  // circle for OVAL - clockwise
  one.learn("OVAL", new int[] {333,242,333,242,333,242,333,243,334,243,334,244,334,244,334,245,334,245,334,246,334,246,334,246,334,247,334,247,334,248,334,248,334,249,334,249,334,249,334,250,334,250,334,251,334,251,334,251,334,252,334,252,334,252,334,253,334,253,334,253,334,254,334,254,334,255,334,255,334,255,334,256,334,256,334,256,334,257,334,257,334,257,334,257,334,257,334,258,334,258,333,258,333,259,333,259,333,259,333,259,333,260,333,260,333,260,332,260,332,261,332,261,332,262,331,262,331,262,331,263,331,263,330,263,330,264,330,264,330,264,330,264,330,265,329,265,329,266,329,266,329,266,328,266,328,267,328,267,328,267,328,267,328,268,328,268,327,268,327,269,327,269,326,270,326,270,326,270,326,270,326,271,325,271,325,271,325,271,325,271,324,272,324,272,323,273,323,273,323,273,323,273,323,274,322,274,322,274,322,274,321,275,321,275,321,275,320,275,320,276,320,276,320,276,319,276,319,276,319,277,318,277,318,277,318,277,318,278,318,278,317,278,317,278,317,279,316,279,316,279,316,279,316,279,316,279,315,279,315,280,315,280,315,280,314,280,314,280,314,281,314,281,313,281,313,281,313,281,313,281,312,281,312,281,312,282,311,282,311,282,311,282,310,282,310,283,310,283,309,283,309,283,309,283,308,283,308,283,308,283,307,283,307,284,307,284,306,284,306,284,306,285,305,285,305,285,304,285,304,285,304,285,304,285,303,285,303,285,302,285,302,286,302,286,301,286,301,286,300,286,300,286,299,286,299,286,299,286,299,287,298,287,298,287,297,287,297,287,297,287,297,287,296,287,296,287,295,287,295,288,295,288,294,288,294,288,294,288,293,288,293,288,292,288,292,288,292,288,291,288,291,288,290,288,290,288,289,288,289,288,289,288,288,288,288,288,287,288,287,289,287,289,287,289,286,289,286,289,285,289,285,289,285,289,284,289,284,289,283,289,283,289,282,289,282,289,282,289,281,289,281,289,280,289,280,289,280,289,279,289,279,289,278,289,278,289,277,289,277,289,277,289,276,289,276,289,275,289,275,289,275,289,274,289,274,289,273,289,273,289,273,289,272,288,272,288,271,288,271,288,271,288,271,288,270,288,270,288,269,288,269,288,268,288,268,288,268,287,268,287,267,287,267,287,266,287,266,287,266,287,265,287,265,286,265,286,264,286,264,286,264,286,263,286,263,286,263,286,262,286,262,285,261,285,261,285,261,285,261,285,261,284,260,284,260,284,260,284,259,284,259,284,259,284,259,284,258,284,258,283,258,283,258,283,257,283,257,282,257,282,257,282,256,282,256,282,255,282,255,282,255,281,255,281,255,281,254,281,254,280,254,280,253,280,253,280,253,280,253,280,253,279,252,279,252,279,252,279,252,278,251,278,251,278,250,278,250,278,250,278,250,277,250,277,250,277,249,277,249,276,248,276,248,275,248,275,248,275,247,275,247,274,246,274,246,274,246,273,245,273,245,273,245,273,245,273,245,272,244,272,244,271,243,271,243,271,243,270,243,270,242,269,242,269,242,269,241,269,241,268,241,268,241,268,240,268,240,267,240,267,240,266,239,266,239,266,239,266,238,265,238,265,238,265,238,264,238,264,238,264,238,263,237,263,237,263,237,263,237,263,236,262,236,262,236,262,236,261,236,261,236,261,236,260,235,260,235,260,235,260,235,259,234,259,234,259,234,258,234,258,234,258,233,258,233,258,233,258,233,257,233,257,233,256,233,256,232,256,232,255,232,255,231,254,231,254,231,254,231,254,231,253,231,253,231,253,231,252,231,252,231,252,230,252,230,251,230,251,230,251,230,250,229,250,229,250,229,249,229,249,229,249,229,248,229,248,229,248,229,247,229,247,228,247,228,246,228,246,228,246,228,245,228,245,228,245,227,245,227,244,227,244,227,243,227,243,227,243,227,242,227,242,227,241,227,241,227,240,227,240,227,240,226,239,226,238,226,238,226,238,226,237,226,237,226,236,226,236,226,236,226,236,226,235,226,235,226,234,226,234,226,233,225,233,225,233,225,232,225,232,225,232,225,231,225,231,225,230,225,230,225,230,225,229,225,229,225,228,225,228,225,228,225,227,225,227,225,226,225,226,225,226,225,225,225,225,225,224,225,224,225,224,225,223,225,223,225,223,225,222,225,222,225,221,225,221,225,221,225,220,225,220,225,220,226,220,226,219,226,219,226,218,226,218,226,218,226,217,226,217,226,217,226,216,226,216,226,216,226,215,226,215,226,215,226,214,227,214,227,214,227,213,227,213,227,213,227,213,227,212,227,212,228,212,228,211,228,211,228,211,228,210,228,210,228,209,228,209,228,209,228,209,229,208,229,208,229,207,229,207,230,206,230,206,230,206,230,206,230,205,230,205,230,205,230,204,230,204,230,204,231,204,231,203,231,203,231,203,232,203,232,202,232,202,232,201,232,201,232,201,233,201,233,201,233,200,233,200,233,200,233,199,234,199,234,199,234,199,234,199,234,199,234,198,235,198,235,198,235,197,235,197,235,197,236,197,236,197,236,197,236,196,236,196,237,196,237,196,237,195,237,195,238,195,238,195,238,195,238,194,238,194,239,193,239,193,239,193,240,193,240,193,240,193,240,192,240,192,241,192,241,192,241,191,242,191,242,191,242,191,242,191,243,191,243,190,243,190,244,190,244,190,244,189,244,189,245,189,245,189,245,189,246,189,246,188,246,188,246,188,247,188,247,188,247,188,248,188,248,187,249,187,249,187,249,187,249,187,250,187,250,187,250,186,251,186,251,186,251,186,252,186,252,185,253,185,253,185,253,185,253,185,254,185,254,185,254,185,255,185,255,185,255,184,255,184,256,184,256,184,256,184,257,184,257,184,257,183,258,183,258,183,258,183,258,183,259,183,259,183,260,183,260,183,260,183,260,183,261,183,261,182,261,182,262,182,262,182,262,182,263,182,263,182,264,181,264,181,264,181,265,181,265,181,265,181,266,181,266,181,266,181,267,181,267,181,267,181,268,181,268,181,268,181,269,180,269,180,269,180,270,180,270,180,271,180,271,180,271,180,272,180,272,180,272,180,272,180,273,180,273,180,274,180,274,180,274,180,275,180,275,179,275,179,275,179,276,179,276,179,276,179,277,179,277,179,277,179,278,179,278,179,278,179,279,179,279,179,279,179,280,179,280,179,281,179,281,179,281,179,281,179,282,179,282,179,282,179,283,179,283,179,283,179,284,179,284,179,284,179,285,179,285,179,285,179,286,179,286,179,286,179,287,179,287,179,288,179,288,179,288,179,288,179,289,179,289,179,289,179,289,179,290,179,290,179,290,179,291,179,291,179,291,179,292,179,292,179,292,179,293,179,293,179,293,179,294,179,294,179,294,179,295,179,295,180,295,180,296,180,296,180,296,180,296,180,297,180,297,180,298,181,298,181,298,181,298,181,299,181,299,181,299,181,299,181,300,181,300,181,301,181,301,182,301,182,302,182,302,182,302,182,303,182,303,182,303,182,303,182,304,183,304,183,305,183,305,183,305,183,306,183,306,183,306,184,307,184,307,184,307,184,308,184,308,184,308,185,308,185,309,185,309,185,310,185,310,185,310,185,311,185,311,185,311,186,312,186,312,186,312,186,313,186,313,186,313,187,313,187,314,187,314,187,314,187,314,187,315,187,315,187,315,187,315,187,316,187,316,188,316,188,316,188,316,188,316,188,317,188,317,188,317,188,317,189,318,189,318,189,318,189,318,190,319,190,319,190,319,190,319,190,320,190,320,191,320,191,320,192,321,192,321,192,321,192,322,192,322,192,322,192,322,193,322,193,323,193,323,194,323,194,324,194,324,194,324,195,324,195,324,195,325,195,325,196,325,196,325,196,325,196,325,196,325,197,326,197,326,197,326,197,326,198,327,198,327,198,327,198,327,199,327,199,327,199,327,199,328,199,328,199,328,200,328,200,329,200,329,201,329,201,329,201,329,201,329,202,329,202,329,202,330,202,330,203,330,203,330,203,330,203,330,204,330,204,331,204,331,205,331,205,331,205,331,205,331,205,331,206,331,206,332,206,332,207,332,207,332,207,332,207,332,208,333,208,333,209,333,209,333,209,333,209,333,210,333,210,334,211,334,211,334,211,334,211,334,212,334,212,334,212,334,212,334,213,335,213,335,213,335,213,335,213,335,214,335,214,335,214,335,214,335,215,336,215,336,215,336,216,336,216,336,216,336,216,336,217,336,217,336,217,336,217,336,218,336,218,336,218,336,219,336,219,336,219,336,219,336,220,336,220,336,221,336,221,336,221,336,222,336,222,336,222,336,222,336,223,336,223,336,223,336,224,336,224,336,224,336,225,336,225,336,225,336,226,336,226,336,226,337,226,337,227,337,227,337,227,337,227,337,228,337,228,337,228,337,229,337,229,337,229,337,229,337,230,337,230,337,230,337,230,337,231,337,231,337,231,337,231,337,232,337,232,337,232,337,232,337,233,337,233,337,233,337,233,337,234,337,234,337,234,337,234,337,234,337,235,337,235,337,235,337,235,337,236,337,236,337,236,337,236,337,237,337,237,337,237,337,237,337,238,337,238,337,238,337,238,337,239,337,239,337,239,337,240,337,240,337,240,337,240,337,240,337,240,337,241,337,241,337,241,337,242,337,242,337,242,337,243,336,243,336,243,336,243,336,244,336,244,336,244,336,244,336,245,336,245,336,245,336,246,336,246,336,246,336,246,336,246,336,247,336,247,336,247,336,247,336,248,336,248,336,248,336,248,336,248,336,248,336,249,336,249,336,249,335,249,335,250,335,250,335,250,335,250,335,250,335,250,});
  // \ for STRAIGHT_LINE
  one.learn("STRAIGHT_LINE", new int[] {127,114,129,116,130,118,132,121,134,123,137,128,139,131,142,134,146,139,149,144,153,148,156,151,161,156,165,160,170,165,175,170,179,174,183,177,187,181,191,184,194,187,197,189,201,191,203,193,206,195,208,198,210,200,212,202,214,204,217,206,218,208,220,209,221,211,222,212,223,213,224,213,224,214,225,215,226,216,227,217,228,218,229,218,229,219,230,220,230,221,231,221,});
  // C for CHANGE_COLOR
  one.learn("CHANGE_COLOR", new int[] {301,224,300,224,300,224,300,224,300,223,299,223,299,222,299,222,299,222,299,221,299,221,299,221,298,220,298,220,298,220,298,219,297,219,297,219,297,218,297,218,297,217,297,217,297,217,296,216,296,216,296,215,296,215,295,215,295,214,295,214,295,213,294,213,294,212,294,212,294,212,294,212,294,211,293,211,293,211,293,210,293,210,293,210,292,210,292,209,292,209,292,208,292,208,292,208,291,207,291,207,290,207,290,206,290,206,290,205,289,205,289,205,289,205,289,205,289,204,288,204,288,203,288,203,288,203,287,203,287,203,287,203,287,202,287,202,287,202,286,201,286,201,285,201,285,201,285,200,285,200,285,200,285,199,284,199,284,199,284,198,283,198,283,198,283,198,283,198,282,198,282,197,282,197,281,197,281,197,281,197,281,197,280,197,280,196,280,196,280,196,279,196,279,196,279,196,279,195,278,195,278,195,277,195,277,195,277,195,276,195,276,194,275,194,275,194,275,194,275,194,274,194,274,194,273,193,273,193,272,193,272,193,272,193,272,193,271,193,271,193,270,193,270,193,270,193,269,193,269,193,268,193,268,192,268,192,267,192,267,192,267,192,266,192,266,192,265,192,265,192,265,192,264,192,264,192,263,192,263,191,263,191,262,191,262,191,261,191,261,191,260,191,260,191,260,191,259,191,259,191,258,191,258,191,258,191,258,191,257,191,257,191,256,191,256,191,255,191,255,191,255,191,254,191,254,191,253,191,253,191,253,191,252,191,252,190,251,190,251,190,250,190,250,190,250,190,249,190,249,190,248,190,248,190,248,190,247,190,247,190,246,190,246,190,246,190,245,190,245,190,244,190,244,190,243,190,243,190,243,190,242,190,242,190,241,190,241,190,241,190,240,190,240,190,239,190,239,190,239,190,238,190,237,190,237,190,236,190,236,190,235,190,235,190,235,190,234,190,234,190,233,190,233,190,233,190,232,190,232,191,231,191,231,191,230,191,230,191,230,191,229,191,229,191,229,191,228,191,228,191,228,192,227,192,227,192,227,192,226,192,226,192,225,192,225,192,225,193,224,193,224,193,224,193,224,193,223,193,223,193,222,193,222,194,222,194,221,194,221,194,221,195,220,195,220,195,220,195,220,195,219,195,219,195,218,195,218,196,218,196,217,196,217,197,217,197,217,197,216,197,216,198,215,198,215,198,215,198,215,199,214,199,214,199,213,199,213,199,213,200,213,200,213,200,212,200,212,200,212,201,211,201,211,201,211,201,210,201,210,202,210,202,210,203,209,203,209,203,208,203,208,203,208,204,208,204,208,204,207,204,207,205,207,205,206,205,206,205,206,205,206,205,205,206,205,206,205,206,205,206,204,206,204,207,204,207,204,208,204,208,203,208,203,208,203,208,202,209,202,209,202,210,202,210,201,210,201,210,201,210,200,210,200,211,200,212,200,212,199,212,199,213,199,213,198,213,198,214,198,214,198,214,197,214,197,215,197,215,197,215,197,216,196,216,196,216,195,216,195,217,195,217,195,217,195,218,195,218,195,218,194,219,194,219,193,219,193,220,193,220,193,220,193,220,193,221,192,221,192,221,192,221,192,222,191,222,191,223,191,223,191,223,190,223,190,224,190,224,190,224,190,225,190,225,190,225,189,226,189,226,189,227,188,227,188,227,188,228,188,228,188,228,188,229,188,229,188,229,187,229,187,230,187,230,187,231,186,231,186,232,186,232,186,232,186,233,186,233,186,233,186,234,186,234,185,234,185,234,185,235,185,235,185,236,185,236,185,237,185,237,185,237,185,237,185,238,185,238,185,239,184,239,184,239,184,240,184,240,184,241,184,241,184,241,183,242,183,242,183,243,183,243,183,243,183,244,183,244,183,245,183,245,183,246,183,246,183,246,183,247,183,247,183,248,183,248,183,248,183,249,183,249,183,250,183,250,183,251,183,251,183,251,183,252,183,252,183,253,183,253,183,253,183,254,183,254,183,255,183,255,183,255,183,256,183,256,183,257,183,257,183,258,183,258,183,258,183,259,183,259,183,260,183,260,183,260,183,261,183,261,183,262,183,262,183,263,183,263,183,263,183,264,183,264,183,265,183,265,183,265,183,266,183,266,183,267,183,267,183,267,183,267,184,268,184,268,184,269,184,269,184,269,184,270,184,270,184,270,184,271,184,271,184,272,185,272,185,272,185,272,185,273,185,273,186,274,186,274,186,274,186,275,186,275,186,276,186,276,186,276,187,276,187,277,187,277,187,277,187,277,187,278,187,278,188,278,188,279,188,279,188,279,188,279,188,279,188,280,189,280,189,280,189,281,189,281,190,281,190,282,190,282,190,283,190,283,191,283,191,284,191,284,192,284,192,285,192,285,192,285,193,286,193,286,193,286,193,287,194,287,194,287,194,287,194,288,194,288,195,289,195,289,195,289,196,289,196,290,196,290,196,291,197,291,197,291,198,291,198,291,198,292,198,292,199,292,199,293,199,293,200,294,200,294,200,294,201,294,201,295,201,295,202,295,202,296,203,296,203,296,203,296,203,297,204,297,204,298,205,298,205,298,205,298,205,299,206,299,206,299,206,299,206,300,207,300,208,300,208,300,208,300,208,301,209,301,209,301,209,301,210,302,210,302,210,302,211,302,211,303,211,303,212,303,212,304,213,304,213,304,213,304,214,305,215,305,215,305,215,306,216,306,216,306,217,306,217,306,217,306,217,307,218,307,218,307,218,307,219,307,219,308,219,308,220,308,220,309,220,309,221,309,221,309,221,309,222,309,222,309,222,309,223,309,223,309,223,310,223,310,224,310,224,310,224,311,225,311,225,311,225,311,226,311,226,311,227,311,227,311,227,311,228,311,228,312,228,312,228,312,228,312,229,312,229,312,230,313,230,313,230,313,231,313,231,313,231,313,232,313,232,314,233,314,233,314,233,314,233,314,234,314,234,314,234,314,235,314,235,314,235,314,236,314,236,315,236,315,237,315,237,315,237,315,237,315,238,315,238,315,239,315,239,316,239,316,239,316,240,316,240,316,241,316,241,316,241,316,242,316,242,316,242,316,243,316,243,316,244,316,244,316,244,316,245,316,245,316,245,316,246,316,246,316,247,316,247,316,247,316,248,316,248,316,249,316,249,317,249,317,249,317,250,317,250,317,251,317,251,317,252,317,252,317,252,317,253,317,253,317,254,317,254,317,254,317,255,317,255,317,256,317,256,317,257,317,257,317,257,317,258,317,258,317,259,317,259,317,259,317,260,317,260,317,261,317,261,317,261,317,262,317,262,317,263,317,263,317,264,317,264,317,264,317,265,317,265,317,266,317,266,317,266,317,267,317,267,317,268,317,268,317,269,316,269,316,269,316,270,316,270,316,271,316,271,316,271,316,272,316,272,316,272,316,272,316,273,316,273,316,273,316,274,316,274,316,274,316,274,316,275,316,275,316,275,316,276,315,276,315,276,315,276,315,277,315,277,315,277,315,277,315,277,315,278,315,278,315,278,315,279,315,279,315,279,315,280,314,280,314,280,314,280,314,281,314,281,314,282,314,282,314,282,314,283,313,283,313,283,313,284,313,284,313,284,313,284,313,284,312,285,312,285,312,285,312,285,312,285,312,286,312,286,312,286,311,286,311,287,311,287,311,287,311,287,311,288,311,288,311,288,311,288,311,288,310,289,310,289,310,289,310,289,310,289,310,289,310,290,310,290,310,290,309,291,309,291,309,291,309,292,309,292,309,293,309,293,308,293,308,293,308,293,308,294,308,294,308,294,308,294,307,295,307,295,307,295,307,295,307,296,307,296,307,296,307,296,307,296,306,297,306,297,306,297,306,297,306,297,306,298,306,298,306,298,306,298,306,298,305,299,305,299,305,});
  // ^ for CHNAGE_THICKNESS
  one.learn("CHNAGE_THICKNESS", new int[] {166,339,166,339,166,339,167,338,167,338,167,337,167,337,168,337,168,337,168,336,169,336,169,336,169,335,170,335,170,335,170,334,170,334,171,334,171,333,171,333,172,333,172,332,172,332,172,332,173,332,173,331,174,331,175,330,175,329,175,329,176,328,176,328,176,327,177,327,177,327,177,327,177,326,178,326,178,325,179,325,179,325,180,324,180,324,180,323,180,323,181,323,181,322,182,322,182,322,182,322,182,321,182,321,183,321,183,320,183,320,183,320,184,319,184,319,185,319,185,318,185,318,185,317,185,317,186,317,186,317,186,316,187,316,187,315,187,315,187,315,188,315,188,314,188,314,188,314,188,313,189,313,189,312,190,312,190,312,190,312,190,311,190,311,190,310,191,310,191,310,191,310,192,310,192,309,192,309,192,308,192,308,192,308,192,307,193,307,193,307,193,307,193,307,193,306,194,306,194,306,194,306,194,305,195,305,195,305,195,305,195,304,195,304,196,304,196,303,196,303,197,302,197,302,197,302,197,302,197,302,198,301,198,301,198,300,198,300,199,300,199,300,200,299,200,299,200,298,200,298,200,298,200,298,201,297,201,297,201,297,201,297,202,297,202,296,202,296,202,296,202,296,202,296,202,296,203,296,203,297,203,297,204,298,205,299,205,299,206,300,207,301,208,303,209,304,210,304,211,305,211,306,212,307,212,307,213,308,213,309,214,309,214,309,215,310,215,310,216,311,216,311,216,312,217,312,217,312,218,313,218,313,218,314,219,314,219,314,220,315,221,315,221,315,221,316,222,316,222,317,223,317,223,318,223,318,224,318,225,319,225,319,226,320,226,320,227,320,227,321,227,321,228,322,228,322,229,322,229,323,230,323,230,324,231,324,231,324,231,324,232,324,232,325,233,325,233,326,233,326,234,326,234,327,235,327,235,327,235,328,236,328,236,328,237,329,237,329,237,329,238,329,238,329,238,330,238,330,239,331,239,331,239,331,240,331,240,332,240,332,240,332,241,332,241,332,241,333,242,333,242,333,242,333,243,333,243,334,243,334,243,334,243,334,243,334,244,334,244,335,244,335,});
  
  one.bind("FREEFORM_LINE RECTANGLE OVAL STRAIGHT_LINE CHANGE_COLOR CHNAGE_THICKNESS", "detected");
}

void draw(){
  background(255);
  state.draw();
  if(state.active){
    shape.draw();
  }
}

void mousePressed(){
  if(!state.active && mouseButton==LEFT){
    state.active = true;
    shape = state.makeShape();
  }
}

void mouseReleased() {
  if(state.active && mouseButton==LEFT){
    shape.active = false;
    state.shapes.add(shape);
    state.active = false;
    shape = null;
  }
  else if(mouseButton==RIGHT){
    one.check();
  }
}

void mouseDragged(){
  if(mouseButton==RIGHT){
    one.track(mouseX, mouseY);
  }
}

void keyPressed(){
  keys[key] = true;
  if(state.shapes.size()>0 && key==BACKSPACE){
    state.shapes.removeLast();
  }
}

void keyReleased(){
  keys[key] = false;
}
